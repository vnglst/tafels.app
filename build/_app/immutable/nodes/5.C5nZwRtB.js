import{a as Se,s as xe,f as L,i as Gt,b as O,t as be}from"../chunks/BljO_e8n.js";import{i as we}from"../chunks/Bt8Tyy_Q.js";import{a as Ee,o as Ie}from"../chunks/BuOnsFK7.js";import{aX as $e,p as Te,F as yt,G as Ae,a as ke,m as y,o as M,J as C,aW as Lt,K as H,u as Y,M as G,aj as Oe,I as Me,N as gt,t as ot,v as Ce,d as je}from"../chunks/D6Jb6PhO.js";import{s as et,e as zt}from"../chunks/D1I6Y9va.js";import{b as Re,g as Bt,a as De,P as Ge,C as Ht,e as Le,s as ze,t as Jt,c as Be,d as He}from"../chunks/Bitz-Ffb.js";import{c as Je,B as We,q as Pe}from"../chunks/KbhgvUuq.js";import{s as Ue,y as qe,n as Ne}from"../chunks/CvB_GpN9.js";function Xe(e,{from:t,to:n},s={}){var{delay:r=0,duration:i=k=>Math.sqrt(k)*120,easing:o=Je}=s,c=getComputedStyle(e),u=c.transform==="none"?"":c.transform,[f,p]=c.transformOrigin.split(" ").map(parseFloat);f/=e.clientWidth,p/=e.clientHeight;var h=Ye(e),a=e.clientWidth/n.width/h,l=e.clientHeight/n.height/h,d=t.left+t.width*f,g=t.top+t.height*p,v=n.left+n.width*f,T=n.top+n.height*p,$=(d-v)*a,P=(g-T)*l,m=t.width/n.width,E=t.height/n.height;return{delay:r,duration:typeof i=="function"?i(Math.sqrt($*$+P*P)):i,easing:o,css:(k,R)=>{var lt=R*$,pt=R*P,z=k+R*m,D=k+R*E;return`transform: ${u} translate(${lt}px, ${pt}px) scale(${z}, ${D});`}}}function Ye(e){if("currentCSSZoom"in e)return e.currentCSSZoom;for(var t=e,n=1;t!==null;)n*=+getComputedStyle(t).zoom,t=t.parentElement;return n}function Ke(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Ze(){const e=Ke();if(e.__xstate__)return e.__xstate__}const Fe=e=>{if(typeof window>"u")return;const t=Ze();t&&t.register(e)};class Wt{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const n={value:t,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const Qt=".",Ve="",te="",Qe="#",tn="*",ee="xstate.init",St="xstate.stop";function en(e,t){return{type:`xstate.after.${e}.${t}`}}function xt(e,t){return{type:`xstate.done.state.${e}`,output:t}}function nn(e,t){return{type:`xstate.done.actor.${e}`,output:t,actorId:e}}function sn(e,t){return{type:`xstate.error.actor.${e}`,error:t,actorId:e}}function ne(e){return{type:ee,input:e}}function j(e){setTimeout(()=>{throw e})}const rn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function se(e,t){const n=Pt(e),s=Pt(t);return typeof s=="string"?typeof n=="string"?s===n:!1:typeof n=="string"?n in s:Object.keys(n).every(r=>r in s?se(n[r],s[r]):!1)}function Tt(e){if(ie(e))return e;const t=[];let n="";for(let s=0;s<e.length;s++){switch(e.charCodeAt(s)){case 92:n+=e[s+1],s++;continue;case 46:t.push(n),n="";continue}n+=e[s]}return t.push(n),t}function Pt(e){if(Bn(e))return e.value;if(typeof e!="string")return e;const t=Tt(e);return on(t)}function on(e){if(e.length===1)return e[0];const t={};let n=t;for(let s=0;s<e.length-1;s++)if(s===e.length-2)n[e[s]]=e[s+1];else{const r=n;n={},r[e[s]]=n}return t}function Ut(e,t){const n={},s=Object.keys(e);for(let r=0;r<s.length;r++){const i=s[r];n[i]=t(e[i],i,e,r)}return n}function re(e){return ie(e)?e:[e]}function J(e){return e===void 0?[]:re(e)}function bt(e,t,n,s){return typeof e=="function"?e({context:t,event:n,self:s}):e}function ie(e){return Array.isArray(e)}function cn(e){return e.type.startsWith("xstate.error.actor")}function Z(e){return re(e).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function oe(e){if(!(e===void 0||e===Ve))return J(e)}function wt(e,t,n){var i,o,c;const s=typeof e=="object",r=s?e:void 0;return{next:(i=s?e.next:e)==null?void 0:i.bind(r),error:(o=s?e.error:t)==null?void 0:o.bind(r),complete:(c=s?e.complete:n)==null?void 0:c.bind(r)}}function qt(e,t){return`${t}.${e}`}function At(e,t){const n=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return e.implementations.actors[t];const[,s,r]=n,o=e.getStateNodeById(r).config.invoke;return(Array.isArray(o)?o[s]:o).src}function Nt(e,t){return`${e.sessionId}.${t}`}let an=0;function un(e,t){const n=new Map,s=new Map,r=new WeakMap,i=new Set,o={},{clock:c,logger:u}=t,f={schedule:(a,l,d,g,v=Math.random().toString(36).slice(2))=>{const T={source:a,target:l,event:d,delay:g,id:v,startedAt:Date.now()},$=Nt(a,v);h._snapshot._scheduledEvents[$]=T;const P=c.setTimeout(()=>{delete o[$],delete h._snapshot._scheduledEvents[$],h._relay(a,l,d)},g);o[$]=P},cancel:(a,l)=>{const d=Nt(a,l),g=o[d];delete o[d],delete h._snapshot._scheduledEvents[d],g!==void 0&&c.clearTimeout(g)},cancelAll:a=>{for(const l in h._snapshot._scheduledEvents){const d=h._snapshot._scheduledEvents[l];d.source===a&&f.cancel(a,d.id)}}},p=a=>{if(!i.size)return;const l={...a,rootId:e.sessionId};i.forEach(d=>{var g;return(g=d.next)==null?void 0:g.call(d,l)})},h={_snapshot:{_scheduledEvents:((t==null?void 0:t.snapshot)&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${an++}`,_register:(a,l)=>(n.set(a,l),a),_unregister:a=>{n.delete(a.sessionId);const l=r.get(a);l!==void 0&&(s.delete(l),r.delete(a))},get:a=>s.get(a),getAll:()=>Object.fromEntries(s.entries()),_set:(a,l)=>{const d=s.get(a);if(d&&d!==l)throw new Error(`Actor with system ID '${a}' already exists.`);s.set(a,l),r.set(l,a)},inspect:a=>{const l=wt(a);return i.add(l),{unsubscribe(){i.delete(l)}}},_sendInspectionEvent:p,_relay:(a,l,d)=>{h._sendInspectionEvent({type:"@xstate.event",sourceRef:a,actorRef:l,event:d}),l._send(d)},scheduler:f,getSnapshot:()=>({_scheduledEvents:{...h._snapshot._scheduledEvents}}),start:()=>{const a=h._snapshot._scheduledEvents;h._snapshot._scheduledEvents={};for(const l in a){const{source:d,target:g,event:v,delay:T,id:$}=a[l];f.schedule(d,g,v,T,$)}},_clock:c,_logger:u};return h}let vt=!1;const kt=1;let w=(function(e){return e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped",e})({});const hn={clock:{setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},logger:console.log.bind(console),devTools:!1};class fn{constructor(t,n){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Wt(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=w.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this.systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const s={...hn,...n},{clock:r,logger:i,parent:o,syncSnapshot:c,id:u,systemId:f,inspect:p}=s;this.system=o?o.system:un(this,{clock:r,logger:i}),p&&!o&&this.system.inspect(wt(p)),this.sessionId=this.system._bookId(),this.id=u??this.sessionId,this.logger=(n==null?void 0:n.logger)??this.system._logger,this.clock=(n==null?void 0:n.clock)??this.system._clock,this._parent=o,this._syncSnapshot=c,this.options=s,this.src=s.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:h=>{this._deferred.push(h)},system:this.system,stopChild:h=>{if(h._parent!==this)throw new Error(`Cannot stop child actor ${h.id} of ${this.id} because it is not a child`);h._stop()},emit:h=>{const a=this.eventListeners.get(h.type),l=this.eventListeners.get("*");if(!a&&!l)return;const d=[...a?a.values():[],...l?l.values():[]];for(const g of d)try{g(h)}catch(v){j(v)}},actionExecutor:h=>{const a=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:h.type,params:h.params}}),!h.exec)return;const l=vt;try{vt=!0,h.exec(h.info,h.params)}finally{vt=l}};this._processingStatus===w.Running?a():this._deferred.push(a)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),f&&(this.systemId=f,this.system._set(f,this)),this._initState((n==null?void 0:n.snapshot)??(n==null?void 0:n.state)),f&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){var n;try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,(n=this.options)==null?void 0:n.input)}catch(s){this._snapshot={status:"error",output:void 0,error:s}}}update(t,n){var r,i;this._snapshot=t;let s;for(;s=this._deferred.shift();)try{s()}catch(o){this._deferred.length=0,this._snapshot={...t,status:"error",error:o}}switch(this._snapshot.status){case"active":for(const o of this.observers)try{(r=o.next)==null||r.call(o,t)}catch(c){j(c)}break;case"done":for(const o of this.observers)try{(i=o.next)==null||i.call(o,t)}catch(c){j(c)}this._stopProcedure(),this._complete(),this._doneEvent=nn(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:t})}subscribe(t,n,s){var i;const r=wt(t,n,s);if(this._processingStatus!==w.Stopped)this.observers.add(r);else switch(this._snapshot.status){case"done":try{(i=r.complete)==null||i.call(r)}catch(o){j(o)}break;case"error":{const o=this._snapshot.error;if(!r.error)j(o);else try{r.error(o)}catch(c){j(c)}break}}return{unsubscribe:()=>{this.observers.delete(r)}}}on(t,n){let s=this.eventListeners.get(t);s||(s=new Set,this.eventListeners.set(t,s));const r=n.bind(void 0);return s.add(r),{unsubscribe:()=>{s.delete(r)}}}start(){if(this._processingStatus===w.Running)return this;this._syncSnapshot&&this.subscribe({next:s=>{s.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:s})},error:()=>{}}),this.system._register(this.sessionId,this),this.systemId&&this.system._set(this.systemId,this),this._processingStatus=w.Running;const t=ne(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(s){return this._snapshot={...this._snapshot,status:"error",error:s},this._error(s),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let n,s;try{n=this.logic.transition(this._snapshot,t,this._actorScope)}catch(r){s={err:r}}if(s){const{err:r}=s;this._snapshot={...this._snapshot,status:"error",error:r},this._error(r);return}this.update(n,t),t.type===St&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===w.Stopped?this:(this.mailbox.clear(),this._processingStatus===w.NotStarted?(this._processingStatus=w.Stopped,this):(this.mailbox.enqueue({type:St}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var t;for(const n of this.observers)try{(t=n.complete)==null||t.call(n)}catch(s){j(s)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||j(t);return}let n=!1;for(const s of this.observers){const r=s.error;n||(n=!r);try{r==null||r(t)}catch(i){j(i)}}this.observers.clear(),n&&j(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,sn(this.id,t))}_stopProcedure(){return this._processingStatus!==w.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Wt(this._process.bind(this)),this._processingStatus=w.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==w.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:Fe)(this)}toJSON(){return{xstate$$type:kt,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[rn](){return this}getSnapshot(){return this._snapshot}}function st(e,...[t]){return new fn(e,t)}function dn(e,t,n,s,{sendId:r}){const i=typeof r=="function"?r(n,s):r;return[t,{sendId:i},void 0]}function ln(e,t){e.defer(()=>{e.system.scheduler.cancel(e.self,t.sendId)})}function pn(e){function t(n,s){}return t.type="xstate.cancel",t.sendId=e,t.resolve=dn,t.execute=ln,t}function yn(e,t,n,s,{id:r,systemId:i,src:o,input:c,syncSnapshot:u}){const f=typeof o=="string"?At(t.machine,o):o,p=typeof r=="function"?r(n):r;let h,a;return f&&(a=typeof c=="function"?c({context:t.context,event:n.event,self:e.self}):c,h=st(f,{id:p,src:o,parent:e.self,syncSnapshot:u,systemId:i,input:a})),[X(t,{children:{...t.children,[p]:h}}),{id:r,systemId:i,actorRef:h,src:o,input:a},void 0]}function gn(e,{actorRef:t}){t&&e.defer(()=>{t._processingStatus!==w.Stopped&&t.start()})}function vn(...[e,{id:t,systemId:n,input:s,syncSnapshot:r=!1}={}]){function i(o,c){}return i.type="xstate.spawnChild",i.id=t,i.systemId=n,i.src=e,i.input=s,i.syncSnapshot=r,i.resolve=yn,i.execute=gn,i}function mn(e,t,n,s,{actorRef:r}){const i=typeof r=="function"?r(n,s):r,o=typeof i=="string"?t.children[i]:i;let c=t.children;return o&&(c={...c},delete c[o.id]),[X(t,{children:c}),o,void 0]}function _n(e,t){if(t){if(e.system._unregister(t),t._processingStatus!==w.Running){e.stopChild(t);return}e.defer(()=>{e.stopChild(t)})}}function ce(e){function t(n,s){}return t.type="xstate.stopChild",t.actorRef=e,t.resolve=mn,t.execute=_n,t}function Ot(e,t,n,s){const{machine:r}=s,i=typeof e=="function",o=i?e:r.implementations.guards[typeof e=="string"?e:e.type];if(!i&&!o)throw new Error(`Guard '${typeof e=="string"?e:e.type}' is not implemented.'.`);if(typeof o!="function")return Ot(o,t,n,s);const c={context:t,event:n},u=i||typeof e=="string"?void 0:"params"in e?typeof e.params=="function"?e.params({context:t,event:n}):e.params:void 0;return"check"in o?o.check(s,c,o):o(c,u)}const Mt=e=>e.type==="atomic"||e.type==="final";function V(e){return Object.values(e.states).filter(t=>t.type!=="history")}function rt(e,t){const n=[];if(t===e)return n;let s=e.parent;for(;s&&s!==t;)n.push(s),s=s.parent;return n}function at(e){const t=new Set(e),n=ue(t);for(const s of t)if(s.type==="compound"&&(!n.get(s)||!n.get(s).length))Xt(s).forEach(r=>t.add(r));else if(s.type==="parallel"){for(const r of V(s))if(r.type!=="history"&&!t.has(r)){const i=Xt(r);for(const o of i)t.add(o)}}for(const s of t){let r=s.parent;for(;r;)t.add(r),r=r.parent}return t}function ae(e,t){const n=t.get(e);if(!n)return{};if(e.type==="compound"){const r=n[0];if(r){if(Mt(r))return r.key}else return{}}const s={};for(const r of n)s[r.key]=ae(r,t);return s}function ue(e){const t=new Map;for(const n of e)t.has(n)||t.set(n,[]),n.parent&&(t.has(n.parent)||t.set(n.parent,[]),t.get(n.parent).push(n));return t}function he(e,t){const n=at(t);return ae(e,ue(n))}function Ct(e,t){return t.type==="compound"?V(t).some(n=>n.type==="final"&&e.has(n)):t.type==="parallel"?V(t).every(n=>Ct(e,n)):t.type==="final"}const dt=e=>e[0]===Qe;function Sn(e,t){return e.transitions.get(t)||[...e.transitions.keys()].filter(s=>{if(s===tn)return!0;if(!s.endsWith(".*"))return!1;const r=s.split("."),i=t.split(".");for(let o=0;o<r.length;o++){const c=r[o],u=i[o];if(c==="*")return o===r.length-1;if(c!==u)return!1}return!0}).sort((s,r)=>r.length-s.length).flatMap(s=>e.transitions.get(s))}function xn(e){const t=e.config.after;if(!t)return[];const n=r=>{const i=en(r,e.id),o=i.type;return e.entry.push(Kn(i,{id:o,delay:r})),e.exit.push(pn(o)),o};return Object.keys(t).flatMap(r=>{const i=t[r],o=typeof i=="string"?{target:i}:i,c=Number.isNaN(+r)?r:+r,u=n(c);return J(o).map(f=>({...f,event:u,delay:c}))}).map(r=>{const{delay:i}=r;return{...q(e,r.event,r),delay:i}})}function q(e,t,n){const s=oe(n.target),r=n.reenter??!1,i=En(e,s),o={...n,actions:J(n.actions),guard:n.guard,target:i,source:e,reenter:r,eventType:t,toJSON:()=>({...o,source:`#${e.id}`,target:i?i.map(c=>`#${c.id}`):void 0})};return o}function bn(e){const t=new Map;if(e.config.on)for(const n of Object.keys(e.config.on)){if(n===te)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const s=e.config.on[n];t.set(n,Z(s).map(r=>q(e,n,r)))}if(e.config.onDone){const n=`xstate.done.state.${e.id}`;t.set(n,Z(e.config.onDone).map(s=>q(e,n,s)))}for(const n of e.invoke){if(n.onDone){const s=`xstate.done.actor.${n.id}`;t.set(s,Z(n.onDone).map(r=>q(e,s,r)))}if(n.onError){const s=`xstate.error.actor.${n.id}`;t.set(s,Z(n.onError).map(r=>q(e,s,r)))}if(n.onSnapshot){const s=`xstate.snapshot.${n.id}`;t.set(s,Z(n.onSnapshot).map(r=>q(e,s,r)))}}for(const n of e.after){let s=t.get(n.eventType);s||(s=[],t.set(n.eventType,s)),s.push(n)}return t}function wn(e,t){const n=typeof t=="string"?e.states[t]:t?e.states[t.target]:void 0;if(!n&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${e.id}`);const s={source:e,actions:!t||typeof t=="string"?[]:J(t.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...s,source:`#${e.id}`,target:n?[`#${n.id}`]:[]})};return s}function En(e,t){if(t!==void 0)return t.map(n=>{if(typeof n!="string")return n;if(dt(n))return e.machine.getStateNodeById(n);const s=n[0]===Qt;if(s&&!e.parent)return ut(e,n.slice(1));const r=s?e.key+n:n;if(e.parent)try{return ut(e.parent,r)}catch(i){throw new Error(`Invalid transition definition for state node '${e.id}':
${i.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function fe(e){const t=oe(e.config.target);return t?{target:t.map(n=>typeof n=="string"?ut(e.parent,n):n)}:e.parent.initial}function N(e){return e.type==="history"}function Xt(e){const t=de(e);for(const n of t)for(const s of rt(n,e))t.add(s);return t}function de(e){const t=new Set;function n(s){if(!t.has(s)){if(t.add(s),s.type==="compound")n(s.initial.target[0]);else if(s.type==="parallel")for(const r of V(s))n(r)}}return n(e),t}function Q(e,t){if(dt(t))return e.machine.getStateNodeById(t);if(!e.states)throw new Error(`Unable to retrieve child state '${t}' from '${e.id}'; no child states exist.`);const n=e.states[t];if(!n)throw new Error(`Child state '${t}' does not exist on '${e.id}'`);return n}function ut(e,t){if(typeof t=="string"&&dt(t))try{return e.machine.getStateNodeById(t)}catch{}const n=Tt(t).slice();let s=e;for(;n.length;){const r=n.shift();if(!r.length)break;s=Q(s,r)}return s}function ht(e,t){if(typeof t=="string"){const r=e.states[t];if(!r)throw new Error(`State '${t}' does not exist on '${e.id}'`);return[e,r]}const n=Object.keys(t),s=n.map(r=>Q(e,r)).filter(Boolean);return[e.machine.root,e].concat(s,n.reduce((r,i)=>{const o=Q(e,i);if(!o)return r;const c=ht(o,t[i]);return r.concat(c)},[]))}function In(e,t,n,s){const i=Q(e,t).next(n,s);return!i||!i.length?e.next(n,s):i}function $n(e,t,n,s){const r=Object.keys(t),i=Q(e,r[0]),o=jt(i,t[r[0]],n,s);return!o||!o.length?e.next(n,s):o}function Tn(e,t,n,s){const r=[];for(const i of Object.keys(t)){const o=t[i];if(!o)continue;const c=Q(e,i),u=jt(c,o,n,s);u&&r.push(...u)}return r.length?r:e.next(n,s)}function jt(e,t,n,s){return typeof t=="string"?In(e,t,n,s):Object.keys(t).length===1?$n(e,t,n,s):Tn(e,t,n,s)}function An(e){return Object.keys(e.states).map(t=>e.states[t]).filter(t=>t.type==="history")}function W(e,t){let n=e;for(;n.parent&&n.parent!==t;)n=n.parent;return n.parent===t}function kn(e,t){const n=new Set(e),s=new Set(t);for(const r of n)if(s.has(r))return!0;for(const r of s)if(n.has(r))return!0;return!1}function le(e,t,n){const s=new Set;for(const r of e){let i=!1;const o=new Set;for(const c of s)if(kn(Et([r],t,n),Et([c],t,n)))if(W(r.source,c.source))o.add(c);else{i=!0;break}if(!i){for(const c of o)s.delete(c);s.add(r)}}return Array.from(s)}function On(e){const[t,...n]=e;for(const s of rt(t,void 0))if(n.every(r=>W(r,s)))return s}function Rt(e,t){if(!e.target)return[];const n=new Set;for(const s of e.target)if(N(s))if(t[s.id])for(const r of t[s.id])n.add(r);else for(const r of Rt(fe(s),t))n.add(r);else n.add(s);return[...n]}function pe(e,t){const n=Rt(e,t);if(!n)return;if(!e.reenter&&n.every(r=>r===e.source||W(r,e.source)))return e.source;const s=On(n.concat(e.source));if(s)return s;if(!e.reenter)return e.source.machine.root}function Et(e,t,n){var r;const s=new Set;for(const i of e)if((r=i.target)!=null&&r.length){const o=pe(i,n);i.reenter&&i.source===o&&s.add(o);for(const c of t)W(c,o)&&s.add(c)}return[...s]}function Mn(e,t){if(e.length!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function It(e,t,n,s,r,i){if(!e.length)return t;const o=new Set(t._nodes);let c=t.historyValue;const u=le(e,o,c);let f=t;r||([f,c]=Dn(f,s,n,u,o,c,i,n.actionExecutor)),f=tt(f,s,n,u.flatMap(h=>h.actions),i,void 0),f=jn(f,s,n,u,o,i,c,r);const p=[...o];f.status==="done"&&(f=tt(f,s,n,p.sort((h,a)=>a.order-h.order).flatMap(h=>h.exit),i,void 0));try{return c===t.historyValue&&Mn(t._nodes,o)?f:X(f,{_nodes:p,historyValue:c})}catch(h){throw h}}function Cn(e,t,n,s,r){if(s.output===void 0)return;const i=xt(r.id,r.output!==void 0&&r.parent?bt(r.output,e.context,t,n.self):void 0);return bt(s.output,e.context,i,n.self)}function jn(e,t,n,s,r,i,o,c){let u=e;const f=new Set,p=new Set;Rn(s,o,p,f),c&&p.add(e.machine.root);const h=new Set;for(const a of[...f].sort((l,d)=>l.order-d.order)){r.add(a);const l=[];l.push(...a.entry);for(const d of a.invoke)l.push(vn(d.src,{...d,syncSnapshot:!!d.onSnapshot}));if(p.has(a)){const d=a.initial.actions;l.push(...d)}if(u=tt(u,t,n,l,i,a.invoke.map(d=>d.id)),a.type==="final"){const d=a.parent;let g=(d==null?void 0:d.type)==="parallel"?d:d==null?void 0:d.parent,v=g||a;for((d==null?void 0:d.type)==="compound"&&i.push(xt(d.id,a.output!==void 0?bt(a.output,u.context,t,n.self):void 0));(g==null?void 0:g.type)==="parallel"&&!h.has(g)&&Ct(r,g);)h.add(g),i.push(xt(g.id)),v=g,g=g.parent;if(g)continue;u=X(u,{status:"done",output:Cn(u,t,n,u.machine.root,v)})}}return u}function Rn(e,t,n,s){for(const r of e){const i=pe(r,t);for(const c of r.target||[])!N(c)&&(r.source!==c||r.source!==i||r.reenter)&&(s.add(c),n.add(c)),F(c,t,n,s);const o=Rt(r,t);for(const c of o){const u=rt(c,i);(i==null?void 0:i.type)==="parallel"&&u.push(i),ye(s,t,n,u,!r.source.parent&&r.reenter?void 0:i)}}}function F(e,t,n,s){var r;if(N(e))if(t[e.id]){const i=t[e.id];for(const o of i)s.add(o),F(o,t,n,s);for(const o of i)mt(o,e.parent,s,t,n)}else{const i=fe(e);for(const o of i.target)s.add(o),i===((r=e.parent)==null?void 0:r.initial)&&n.add(e.parent),F(o,t,n,s);for(const o of i.target)mt(o,e.parent,s,t,n)}else if(e.type==="compound"){const[i]=e.initial.target;N(i)||(s.add(i),n.add(i)),F(i,t,n,s),mt(i,e,s,t,n)}else if(e.type==="parallel")for(const i of V(e).filter(o=>!N(o)))[...s].some(o=>W(o,i))||(N(i)||(s.add(i),n.add(i)),F(i,t,n,s))}function ye(e,t,n,s,r){for(const i of s)if((!r||W(i,r))&&e.add(i),i.type==="parallel")for(const o of V(i).filter(c=>!N(c)))[...e].some(c=>W(c,o))||(e.add(o),F(o,t,n,e))}function mt(e,t,n,s,r){ye(n,s,r,rt(e,t))}function Dn(e,t,n,s,r,i,o,c){let u=e;const f=Et(s,r,i);f.sort((h,a)=>a.order-h.order);let p;for(const h of f)for(const a of An(h)){let l;a.history==="deep"?l=d=>Mt(d)&&W(d,h):l=d=>d.parent===h,p??(p={...i}),p[a.id]=Array.from(r).filter(l)}for(const h of f)u=tt(u,t,n,[...h.exit,...h.invoke.map(a=>ce(a.id))],o,void 0),r.delete(h);return[u,p||i]}function Gn(e,t){return e.implementations.actions[t]}function ge(e,t,n,s,r,i){const{machine:o}=e;let c=e;for(const u of s){const f=typeof u=="function",p=f?u:Gn(o,typeof u=="string"?u:u.type),h={context:c.context,event:t,self:n.self,system:n.system},a=f||typeof u=="string"?void 0:"params"in u?typeof u.params=="function"?u.params({context:c.context,event:t}):u.params:void 0;if(!p||!("resolve"in p)){n.actionExecutor({type:typeof u=="string"?u:typeof u=="object"?u.type:u.name||"(anonymous)",info:h,params:a,exec:p});continue}const l=p,[d,g,v]=l.resolve(n,c,h,a,p,r);c=d,"retryResolve"in l&&(i==null||i.push([l,g])),"execute"in l&&n.actionExecutor({type:l.type,info:h,params:g,exec:l.execute.bind(null,n,g)}),v&&(c=ge(c,t,n,v,r,i))}return c}function tt(e,t,n,s,r,i){const o=i?[]:void 0,c=ge(e,t,n,s,{internalQueue:r,deferredActorIds:i},o);return o==null||o.forEach(([u,f])=>{u.retryResolve(n,c,f)}),c}function _t(e,t,n,s){let r=e;const i=[];function o(f,p,h){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:p,snapshot:f,_transitions:h}),i.push(f)}if(t.type===St)return r=X(Yt(r,t,n),{status:"stopped"}),o(r,t,[]),{snapshot:r,microstates:i};let c=t;if(c.type!==ee){const f=c,p=cn(f),h=Kt(f,r);if(p&&!h.length)return r=X(e,{status:"error",error:f.error}),o(r,f,[]),{snapshot:r,microstates:i};r=It(h,e,n,c,!1,s),o(r,f,h)}let u=!0;for(;r.status==="active";){let f=u?Ln(r,c):[];const p=f.length?r:void 0;if(!f.length){if(!s.length)break;c=s.shift(),f=Kt(c,r)}r=It(f,r,n,c,!1,s),u=r!==p,o(r,c,f)}return r.status!=="active"&&Yt(r,c,n),{snapshot:r,microstates:i}}function Yt(e,t,n){return tt(e,t,n,Object.values(e.children).map(s=>ce(s)),[],void 0)}function Kt(e,t){return t.machine.getTransitionData(t,e)}function Ln(e,t){const n=new Set,s=e._nodes.filter(Mt);for(const r of s)t:for(const i of[r].concat(rt(r,void 0)))if(i.always){for(const o of i.always)if(o.guard===void 0||Ot(o.guard,e.context,t,e)){n.add(o);break t}}return le(Array.from(n),new Set(e._nodes),e.historyValue)}function zn(e,t){const n=at(ht(e,t));return he(e,[...n])}function Bn(e){return!!e&&typeof e=="object"&&"machine"in e&&"value"in e}const Hn=function(t){return se(t,this.value)},Jn=function(t){return this.tags.has(t)},Wn=function(t){const n=this.machine.getTransitionData(this,t);return!!(n!=null&&n.length)&&n.some(s=>s.target!==void 0||s.actions.length)},Pn=function(){const{_nodes:t,tags:n,machine:s,getMeta:r,toJSON:i,can:o,hasTag:c,matches:u,...f}=this;return{...f,tags:Array.from(n)}},Un=function(){return this._nodes.reduce((t,n)=>(n.meta!==void 0&&(t[n.id]=n.meta),t),{})};function ct(e,t){return{status:e.status,output:e.output,error:e.error,machine:t,context:e.context,_nodes:e._nodes,value:he(t.root,e._nodes),tags:new Set(e._nodes.flatMap(n=>n.tags)),children:e.children,historyValue:e.historyValue||{},matches:Hn,hasTag:Jn,can:Wn,getMeta:Un,toJSON:Pn}}function X(e,t={}){return ct({...e,...t},e.machine)}function qn(e){if(typeof e!="object"||e===null)return{};const t={};for(const n in e){const s=e[n];Array.isArray(s)&&(t[n]=s.map(r=>({id:r.id})))}return t}function Nn(e,t){const{_nodes:n,tags:s,machine:r,children:i,context:o,can:c,hasTag:u,matches:f,getMeta:p,toJSON:h,...a}=e,l={};for(const g in i){const v=i[g];l[g]={snapshot:v.getPersistedSnapshot(t),src:v.src,systemId:v.systemId,syncSnapshot:v._syncSnapshot}}return{...a,context:ve(o),children:l,historyValue:qn(a.historyValue)}}function ve(e){let t;for(const n in e){const s=e[n];if(s&&typeof s=="object")if("sessionId"in s&&"send"in s&&"ref"in s)t??(t=Array.isArray(e)?e.slice():{...e}),t[n]={xstate$$type:kt,id:s.id};else{const r=ve(s);r!==s&&(t??(t=Array.isArray(e)?e.slice():{...e}),t[n]=r)}}return t??e}function Xn(e,t,n,s,{event:r,id:i,delay:o},{internalQueue:c}){const u=t.machine.implementations.delays;if(typeof r=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${r}" }) instead`);const f=typeof r=="function"?r(n,s):r;let p;if(typeof o=="string"){const h=u&&u[o];p=typeof h=="function"?h(n,s):h}else p=typeof o=="function"?o(n,s):o;return typeof p!="number"&&c.push(f),[t,{event:f,id:i,delay:p},void 0]}function Yn(e,t){const{event:n,delay:s,id:r}=t;if(typeof s=="number"){e.defer(()=>{const i=e.self;e.system.scheduler.schedule(i,i,n,s,r)});return}}function Kn(e,t){function n(s,r){}return n.type="xstate.raise",n.event=e,n.id=t==null?void 0:t.id,n.delay=t==null?void 0:t.delay,n.resolve=Xn,n.execute=Yn,n}function Zn(e,{machine:t,context:n},s,r){const i=(o,c)=>{if(typeof o=="string"){const u=At(t,o);if(!u)throw new Error(`Actor logic '${o}' not implemented in machine '${t.id}'`);const f=st(u,{id:c==null?void 0:c.id,parent:e.self,syncSnapshot:c==null?void 0:c.syncSnapshot,input:typeof(c==null?void 0:c.input)=="function"?c.input({context:n,event:s,self:e.self}):c==null?void 0:c.input,src:o,systemId:c==null?void 0:c.systemId});return r[f.id]=f,f}else return st(o,{id:c==null?void 0:c.id,parent:e.self,syncSnapshot:c==null?void 0:c.syncSnapshot,input:c==null?void 0:c.input,src:o,systemId:c==null?void 0:c.systemId})};return(o,c)=>{const u=i(o,c);return r[u.id]=u,e.defer(()=>{u._processingStatus!==w.Stopped&&u.start()}),u}}function Fn(e,t,n,s,{assignment:r}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const i={},o={context:t.context,event:n.event,spawn:Zn(e,t,n.event,i),self:e.self,system:e.system};let c={};if(typeof r=="function")c=r(o,s);else for(const f of Object.keys(r)){const p=r[f];c[f]=typeof p=="function"?p(o,s):p}const u=Object.assign({},t.context,c);return[X(t,{context:u,children:Object.keys(i).length?{...t.children,...i}:t.children}),void 0,void 0]}function U(e){function t(n,s){}return t.type="xstate.assign",t.assignment=e,t.resolve=Fn,t}const Zt=new WeakMap;function K(e,t,n){let s=Zt.get(e);return s?t in s||(s[t]=n()):(s={[t]:n()},Zt.set(e,s)),s[t]}const Vn={},nt=e=>typeof e=="string"?{type:e}:typeof e=="function"?"resolve"in e?{type:e.type}:{type:e.name}:e;class ft{constructor(t,n){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Qt),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Ut(this.config.states,(s,r)=>new ft(s,{_parent:this,_key:r,_machine:this.machine})):Vn,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=J(this.config.entry).slice(),this.exit=J(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=J(t.tags).slice()}_initialize(){this.transitions=bn(this),this.config.always&&(this.always=Z(this.config.always).map(t=>q(this,te,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(nt),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(nt),eventType:null})}:void 0,history:this.history,states:Ut(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(nt)})),entry:this.entry.map(nt),exit:this.exit.map(nt),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return K(this,"invoke",()=>J(this.config.invoke).map((t,n)=>{const{src:s,systemId:r}=t,i=t.id??qt(this.id,n),o=typeof s=="string"?s:`xstate.invoke.${qt(this.id,n)}`;return{...t,src:o,id:i,systemId:r,toJSON(){const{onDone:c,onError:u,...f}=t;return{...f,type:"xstate.invoke",src:o,id:i}}}}))}get on(){return K(this,"on",()=>[...this.transitions].flatMap(([n,s])=>s.map(r=>[n,r])).reduce((n,[s,r])=>(n[s]=n[s]||[],n[s].push(r),n),{}))}get after(){return K(this,"delayedTransitions",()=>xn(this))}get initial(){return K(this,"initial",()=>wn(this,this.config.initial))}next(t,n){const s=n.type,r=[];let i;const o=K(this,`candidates-${s}`,()=>Sn(this,s));for(const c of o){const{guard:u}=c,f=t.context;let p=!1;try{p=!u||Ot(u,f,n,t)}catch(h){const a=typeof u=="string"?u:typeof u=="object"?u.type:void 0;throw new Error(`Unable to evaluate guard ${a?`'${a}' `:""}in transition for event '${s}' in state node '${this.id}':
${h.message}`)}if(p){r.push(...c.actions),i=c;break}}return i?[i]:void 0}get events(){return K(this,"events",()=>{const{states:t}=this,n=new Set(this.ownEvents);if(t)for(const s of Object.keys(t)){const r=t[s];if(r.states)for(const i of r.events)n.add(`${i}`)}return Array.from(n)})}get ownEvents(){const t=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(s=>!(!s.target&&!s.actions.length&&!s.reenter))));return Array.from(t)}}const Qn="#";class Dt{constructor(t,n){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:(n==null?void 0:n.actors)??{},actions:(n==null?void 0:n.actions)??{},delays:(n==null?void 0:n.delays)??{},guards:(n==null?void 0:n.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new ft(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:n,guards:s,actors:r,delays:i}=this.implementations;return new Dt(this.config,{actions:{...n,...t.actions},guards:{...s,...t.guards},actors:{...r,...t.actors},delays:{...i,...t.delays}})}resolveState(t){const n=zn(this.root,t.value),s=at(ht(this.root,n));return ct({_nodes:[...s],context:t.context||{},children:{},status:Ct(s,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,n,s){return _t(t,n,s,[]).snapshot}microstep(t,n,s){return _t(t,n,s,[]).microstates}getTransitionData(t,n){return jt(this.root,t.value,t,n)||[]}getPreInitialState(t,n,s){const{context:r}=this.config,i=ct({context:typeof r!="function"&&r?r:{},_nodes:[this.root],children:{},status:"active"},this);return typeof r=="function"?tt(i,n,t,[U(({spawn:c,event:u,self:f})=>r({spawn:c,input:u.input,self:f}))],s,void 0):i}getInitialSnapshot(t,n){const s=ne(n),r=[],i=this.getPreInitialState(t,s,r),o=It([{target:[...de(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],i,t,s,!0,r),{snapshot:c}=_t(o,s,t,r);return c}start(t){Object.values(t.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(t){const n=Tt(t),s=n.slice(1),r=dt(n[0])?n[0].slice(Qn.length):n[0],i=this.idMap.get(r);if(!i)throw new Error(`Child state node '#${r}' does not exist on machine '${this.id}'`);return ut(i,s)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,n){return Nn(t,n)}restoreSnapshot(t,n){const s={},r=t.children;Object.keys(r).forEach(h=>{const a=r[h],l=a.snapshot,d=a.src,g=typeof d=="string"?At(this,d):d;if(!g)return;const v=st(g,{id:h,parent:n.self,syncSnapshot:a.syncSnapshot,snapshot:l,src:d,systemId:a.systemId});s[h]=v});function i(h,a){if(a instanceof ft)return a;try{return h.machine.getStateNodeById(a.id)}catch{}}function o(h,a){if(!a||typeof a!="object")return{};const l={};for(const d in a){const g=a[d];for(const v of g){const T=i(h,v);T&&(l[d]??(l[d]=[]),l[d].push(T))}}return l}const c=o(this.root,t.historyValue),u=ct({...t,children:s,_nodes:Array.from(at(ht(this.root,t.value))),historyValue:c},this),f=new Set;function p(h,a){if(!f.has(h)){f.add(h);for(const l in h){const d=h[l];if(d&&typeof d=="object"){if("xstate$$type"in d&&d.xstate$$type===kt){h[l]=a[d.id];continue}p(d,a)}}}}return p(u.context,s),u}}function ts(e,t){return new Dt(e,t)}function es(e,...[t]){const n=st(e,t).start();return Ee(()=>n.stop()),n}function ns(e,...[t]){const n=es(e,t);let s=n.getSnapshot();return{snapshot:$e(s,i=>n.subscribe(o=>{s!==o&&(s=o,i(s))}).unsubscribe),send:n.send,actorRef:n}}function ss(e,...[t]){return ns(e,t)}const rs=3e3,$t=25,Ft={highscore:0,score:0,level:1,numbers:[],inputs:[null,null,null,null]};let Vt=1;const is=ts({initial:"playing",context:{...Ft},states:{playing:{invoke:{src:e=>t=>{const n=setInterval(()=>{t("ADD_NUMBER")},rs-e.score*4);return()=>{clearInterval(n)}}},always:[{cond:"isGameOver",target:"gameover"},{cond:"isCorrect",target:"correct"},{cond:"isWrong",target:"wrong"}],on:{LOAD_HIGHSCORE:{actions:"loadHighscore"},ADD_NUMBER:{actions:"addNumber"},TOGGLE_INPUT:{actions:"toggleInput"}}},correct:{after:{300:{actions:"handleCorrect",target:"playing"}}},wrong:{after:{300:{actions:"handleWrong",target:"playing"}}},gameover:{on:{NEW_GAME:{actions:["newGame","loadHighscore"],target:"playing"}},entry:"setHighscore"}}},{actions:{setHighscore:e=>{const t=Number(localStorage.getItem("highscore"));e.score>t&&localStorage.setItem("highscore",e.score.toString())},loadHighscore:U({highscore:()=>Number(localStorage.getItem("highscore"))}),addNumber:U({numbers:e=>{let t;const[n,s]=Bt(e.numbers),[r,i]=Bt(e.numbers);return n===void 0||r===void 0||s===i||n.v>10||r.v>10?t={id:Vt++,v:De({from:1,to:9})}:t={id:Vt++,v:n.v*r.v},[...e.numbers,t]}}),toggleInput:U({inputs:(e,t)=>{if(t.type!=="TOGGLE_INPUT")return;const n=e.inputs.findIndex(r=>r===t.value),s=[...e.inputs];if(n>-1)s[n]=null;else{const r=e.inputs.findIndex(i=>i===null);s[r]=t.value,Ne.play()}return s}}),handleCorrect:U({numbers:e=>{const t=e.inputs;return qe.play(),Re(e.numbers,t)},inputs:()=>[null,null,null,null],score:e=>{const t=e.numbers[e.inputs[2]].v;return e.score+t}}),handleWrong:U({inputs:()=>(Ue.play(),[null,null,null,null])}),newGame:U({...Ft})},guards:{isGameOver:({numbers:e})=>e.length>=$t,isCorrect:({numbers:e,inputs:t})=>{const[n,s,r]=t.map(i=>e[i]);return(n==null?void 0:n.v)*(s==null?void 0:s.v)===(r==null?void 0:r.v)},isWrong:({numbers:e,inputs:t})=>{if(t[2]===null)return!1;const[n,s,r]=t.map(i=>e[i]);return(n==null?void 0:n.v)*(s==null?void 0:s.v)!==(r==null?void 0:r.v)}}});var os=L('<div class="my-auto text-center text-xl">ðŸŽ‰ New highscore! ðŸŽ‰</div>'),cs=L('<div class="my-auto text-center text-xl">You scored <br/> </div> <!>',1),as=L('<h1 class="my-10" slot="header">GAME OVER</h1>'),us=L('<div class="flex justify-center p-8 mb-4 w-full" slot="footer"><!></div>'),hs=L("<button> </button>"),fs=L('<div class="field svelte-4p1id7"></div>'),ds=L('<h1 slot="header" class="text-4xl my-12 font-bold text-center"> </h1>'),ls=L('<div slot="footer" class="mt-10 mb-6 px-10 text-xs w-full flex justify-between"><span> </span> <span> </span></div>'),ps=L('<div class="container svelte-4p1id7"><!></div>');function ws(e,t){Te(t,!1);const n=()=>xe(g,"$state",s),[s,r]=Se(),i=C(),o=C(),c=C(),u=C(),f=C(),p=C(),h=C(),a=C(),l=C(),d=C(),{state:g,send:v}=ss(is);function T(m){v({type:"TOGGLE_INPUT",value:m})}Ie(()=>{v({type:"LOAD_HIGHSCORE"}),v({type:"ADD_NUMBER"})});const[$,P]=Be({duration:m=>Math.sqrt(m*150),fallback(m){const E=getComputedStyle(m),k=E.transform==="none"?"":E.transform;return{duration:200,easing:Pe,css:R=>`
					transform: ${k} scale(${R});
					opacity: ${R}
				`}}});yt(()=>(y(i),y(o),y(c),y(u),n()),()=>{(m=>{M(i,m.numbers),M(o,m.inputs),M(c,m.score),M(u,m.highscore)})(n().context)}),yt(()=>(y(f),y(p),y(h),y(o)),()=>{(m=>{var E=Lt(m,3);M(f,E[0]),M(p,E[1]),M(h,E[2])})(y(o))}),yt(()=>(y(a),y(l),y(d),y(o),y(i)),()=>{(m=>{var E=Lt(m,3);M(a,E[0]),M(l,E[1]),M(d,E[2])})(y(o).map(m=>y(i)[m]))}),Ae(),we(),Ge(e,{children:(m,E)=>{var k=ps(),R=H(k);{var lt=z=>{Ht(z,{children:(D,B)=>{var A=cs(),_=Me(A),I=gt(H(_),2);G(_);var S=gt(_,2);{var b=x=>{var it=os();O(x,it)};Gt(S,x=>{y(c)>y(u)&&x(b)})}ot(()=>et(I,` ${y(c)??""} points`)),O(D,A)},$$slots:{default:!0,header:(D,B)=>{var A=as();O(D,A)},footer:(D,B)=>{var A=us(),_=H(A);We(_,{pill:!0,primary:!0,animate:!0,delay:100,$$events:{click:()=>v({type:"NEW_GAME"})},children:(I,S)=>{Oe();var b=be("New game");O(I,b)},$$slots:{default:!0}}),G(A),O(D,A)}}})},pt=z=>{{let D=Ce(()=>(y(i),je($t),Y(()=>y(i).length/$t*100)));Ht(z,{get progress(){return y(D)},children:(B,A)=>{var _=fs();Le(_,15,()=>y(i),I=>I.id,(I,S,b)=>{var x=hs();let it;var me=H(x,!0);G(x),ot(()=>{it=ze(x,1,"svelte-4p1id7",null,it,{blue:y(f)===y(b),green:y(p)===y(b),orange:y(h)==y(b)}),et(me,(y(S),Y(()=>y(S).v)))}),Jt(1,x,()=>P,()=>({key:y(b)})),Jt(2,x,()=>$,()=>({key:y(b)})),He(x,()=>Xe,null),zt("click",x,()=>T(y(b))),zt("touchstart",x,_e=>{_e.preventDefault(),T(y(b))}),O(I,x)}),G(_),O(B,_)},$$slots:{default:!0,header:(B,A)=>{var _=ds(),I=H(_);G(_),ot(()=>et(I,`${y(a),Y(()=>{var S;return((S=y(a))==null?void 0:S.v)??"?"})??""}
          x
          ${y(l),Y(()=>{var S;return((S=y(l))==null?void 0:S.v)??"?"})??""}
          =
          ${y(d),Y(()=>{var S;return((S=y(d))==null?void 0:S.v)??"?"})??""}`)),O(B,_)},footer:(B,A)=>{var _=ls(),I=H(_),S=H(I);G(I);var b=gt(I,2),x=H(b);G(b),G(_),ot(()=>{et(S,`score: ${y(c)??""}`),et(x,`highscore: ${y(u)??""}`)}),O(B,_)}}})}};Gt(R,z=>{n(),Y(()=>n().value==="gameover")?z(lt):z(pt,!1)})}G(k),O(m,k)},$$slots:{default:!0}}),ke(),r()}export{ws as component};
